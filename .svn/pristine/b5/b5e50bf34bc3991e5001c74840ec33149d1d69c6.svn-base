(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pagesA/oaPanel/oaPanel"],{"05ef":function(t,e,s){"use strict";var o=s("6e0c"),i=s.n(o);i.a},4171:function(t,e,s){"use strict";(function(t){s("6cdc"),s("921b");o(s("66fd"));var e=o(s("d0ac"));function o(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,s("543d")["createPage"])},4968:function(t,e,s){"use strict";s.d(e,"b",(function(){return i})),s.d(e,"c",(function(){return n})),s.d(e,"a",(function(){return o}));var o={"uni-calendar":function(){return Promise.all([s.e("common/vendor"),s.e("components/uni-calendar/uni-calendar")]).then(s.bind(null,"ff20"))}},i=function(){var t=this,e=t.$createElement;t._self._c},n=[]},"6e0c":function(t,e,s){},7602:function(t,e,s){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=i(s("c1df"));function i(t){return t&&t.__esModule?t:{default:t}}var n=function(){s.e("components/headertop").then(function(){return resolve(s("69cd"))}.bind(null,s)).catch(s.oe)},a=function(){s.e("pagesA/components/headerLandscape").then(function(){return resolve(s("7e7f"))}.bind(null,s)).catch(s.oe)},l=function(){Promise.all([s.e("common/vendor"),s.e("components/uni-calendar/uni-calendar")]).then(function(){return resolve(s("ff20"))}.bind(null,s)).catch(s.oe)},c=function(){Promise.all([s.e("common/vendor"),s.e("node-modules/@dcloudio/uni-ui/lib/uni-icons/uni-icons")]).then(function(){return resolve(s("fedc"))}.bind(null,s)).catch(s.oe)},u={data:function(){return{titleTop:"经分面板",isRotating:!1,staHeight:"",rpx:1,customDate:{shade:!1,dom:!1,startDate:"2010-01-01",endDate:"",data:{start:"----年--月--日 ---",end:"----年--月--日 ---"},dateObj:{start:"",end:""},dufData:"",value:{start:"",end:""}},searchValue:"",customerList:[],customerName:{shade:!1,dom:!1,value:"全部客户",n:"全部客户",old:"全部客户",list:[{cust_name:"全部客户"}]},CustType:{shade:!1,dom:!1,value:"类型",n:"类型",old:"全部客户类型",list:[{cust_type:"类型",type_name:"全部客户类型"}]},searchValue2:"",saleList:[],sale:{shade:!1,dom:!1,value:"所属商务",n:"所属商务",old:"所属商务",list:[{sale_name:"全部商务"}]},eventType:{shade:!1,dom:!1,value:"全部业务",n:"全部业务",old:"全部业务",list:[{business_key:"全部业务",business_val:"全部业务"}]},slideRatio:"",scrollLeft:"",HHLeft:"",firstX:"",scrollTop:"",list:[],totalPage:0,page:1,load:!0,windowHeight:"",slideYY:"",slideYYRatio:"",slideYYHeight:"",YYTop:"",scrollActionY:!1,toTop:!1}},components:{Headertop:n,uniCalendar:l,HeaderLandscape:a,uniIcons:c},onLoad:function(t){console.log(t)},onShow:function(){console.log("状态栏高度");var t=this;wx.getSystemInfo({success:function(e){console.log("设备版本信息",e),console.log("状态栏高度",e.statusBarHeight),t.staHeight=e.statusBarHeight,t.rpx=e.windowWidth/750,t.windowHeight=e.windowHeight}}),wx.onWindowResize((function(e){console.log("切换",e),"landscape"===e.deviceOrientation?(t.isRotating=!0,t.windowHeight=e.size.windowHeight):(t.isRotating=!1,t.windowHeight=e.size.windowHeight)}));var e=1286,s=468,o=s/e;this.slideRatio=o},onReady:function(){var t=this,e=new Date,s=e.getTime()-864e5,i=e.getTime()-6048e5;this.customDate.value.start=(0,o.default)(i).format("YYYY.MM.DD"),this.customDate.value.end=(0,o.default)(s).format("YYYY.MM.DD"),this.customDate.dateObj.start=(0,o.default)(i).format("YYYY-MM-DD"),this.customDate.dateObj.end=(0,o.default)(s).format("YYYY-MM-DD"),this.getBusinessDetail((0,o.default)(i).format("YYYY-MM-DD"),(0,o.default)(s).format("YYYY-MM-DD"),"","","","",1).then((function(e){console.log("初始化列表",e),t.list=e.list,t.totalPage=e.totalPage,t.totalPage<=1?t.load=!1:(t.load=!0,t.getBusinessDetail2());var s=90*(t.list.length+1)+126,o=0;t.isRotating||(o=(t.windowHeight-t.staHeight)/t.rpx-326),t.slideYY=o,console.log(s,o),t.slideYYRatio=o/s,t.slideYYRatio>1?t.scrollActionY=!1:t.scrollActionY=!0,t.slideYYHeight=o/s*o})),this.getCustName(),this.getCustType(),this.getSale(),this.getEventType()},methods:{getCustName:function(){var t=this;this.$post("/apiBusiness.html?f=getCustName").then((function(e){console.log("getCustName==>获取客户名称列表",e),t.customerList=e.data,t.customerName.list=t.customerName.list.concat(e.data)}))},getCustType:function(){var t=this;this.$post("/apiBusiness.html?f=getCustType").then((function(e){console.log("getCustType==>获取客户类型",e),t.CustType.list=t.CustType.list.concat(e.data)}))},getSale:function(){var t=this;this.$post("/apiBusiness.html?f=getSale").then((function(e){console.log("getSale==>获取销售",e),t.saleList=e.data,t.sale.list=t.sale.list.concat(e.data)}))},getEventType:function(){var t=this;this.$post("/apiBusiness.html?f=getEventType").then((function(e){console.log("getEventType==>获取业务线",e),t.eventType.list=t.eventType.list.concat(e.data)}))},getBusinessDetail2:function(){var t=this,e="";"全部客户"!=this.customerName.value&&(e=this.customerName.value);var s="";"类型"!=this.CustType.n&&(s=this.CustType.n);var o="";"所属商务"!=this.sale.value&&(o=this.sale.value);var i="";"全部业务"!=this.eventType.n&&(i=this.eventType.n),this.load=!0,this.page=this.page+1,this.getBusinessDetail(this.customDate.dateObj.start,this.customDate.dateObj.end,i,o,s,e,this.page).then((function(e){console.log("滚动添加",e),t.list=t.list.concat(e.list);var s=90*(t.list.length+1)+126,o=0;t.isRotating||(o=(t.windowHeight-t.staHeight)/t.rpx-326),t.slideYY=o,console.log(s,o),t.slideYYRatio>1?t.scrollActionY=!1:t.scrollActionY=!0,t.slideYYRatio=o/s,t.slideYYHeight=o/s*o}))},updateBusinessDetail:function(){var t=this,e="";"全部客户"!=this.customerName.value&&(e=this.customerName.value);var s="";"类型"!=this.CustType.n&&(s=this.CustType.n);var o="";"所属商务"!=this.sale.value&&(o=this.sale.value);var i="";"全部业务"!=this.eventType.n&&(i=this.eventType.n),this.list=[],this.getBusinessDetail(this.customDate.dateObj.start,this.customDate.dateObj.end,i,o,s,e,1).then((function(e){console.log("初始化列表",e),t.list=e.list,t.page=1,t.totalPage=e.totalPage,t.totalPage<=1?t.load=!1:(t.load=!0,t.getBusinessDetail2());var s=90*(t.list.length+1)+126,o=0;t.isRotating||(o=(t.windowHeight-t.staHeight)/t.rpx-326),t.slideYY=o,console.log(s,o),t.slideYYRatio=o/s,t.slideYYRatio>1?t.scrollActionY=!1:t.scrollActionY=!0,t.slideYYHeight=o/s*o}))},getBusinessDetail:function(t,e,s,o,i,n,a){var l=this;return new Promise((function(c,u){var h={start:t,end:e,business_type:s,sale_name:o,cust_type:i,cust_name:n,page:a};l.$post("/apiBusiness.html?f=getBusinessDetail",h).then((function(t){console.log("getBusinessDetail==>经营详情",t),c(t.data)}))}))},change:function(t){console.log(t),0==t.range.data.length?(console.log("ssssssss"),t.range.before?this.customDate.data.start=this.getTimeForm(t.range.before):(this.customDate.data.start="----年--月--日 ---",this.customDate.data.end="----年--月--日 ---")):(this.customDate.dateObj.start=t.range.data[0],this.customDate.dateObj.end=t.range.data[t.range.data.length-1],this.customDate.data.start=this.getTimeForm(t.range.data[0]),this.customDate.data.end=this.getTimeForm(t.range.data[t.range.data.length-1]))},goSearch:function(t){console.log(t),t=t.replace(/(^\s*)|(\s*$)/g,"");var e=[];if(""!=t)for(var s=0;s<this.customerList.length;s++)this.customerList[s].cust_name.indexOf(t)>=0&&e.push(this.customerList[s]);else console.log("空"),e=[{cust_name:"全部客户"}],e=e.concat(this.customerList);this.customerName.list=e},goSearch2:function(t){console.log(t),t=t.replace(/(^\s*)|(\s*$)/g,"");var e=[];if(""!=t)for(var s=0;s<this.saleList.length;s++)this.saleList[s].sale_name.indexOf(t)>=0&&e.push(this.saleList[s]);else console.log("空"),e=[{sale_name:"全部商务"}],e=e.concat(this.saleList);this.sale.list=e},pitch:function(t){console.log(t),this.customerName.n=t,this.customerName.value=t,"全部商务"==t&&(this.CustType.value="所属商务"),this.updateBusinessDetail(),this.offPop()},pitch2:function(t){var e=this;console.log(t);this.CustType.n=t,this.CustType.list.map((function(s){s.cust_type==t&&(e.CustType.value=s.type_name),"类型"==t&&(e.CustType.value="类型")})),this.updateBusinessDetail(),this.offPop2()},pitch4:function(t){console.log(t),this.sale.n=t,this.sale.value=t,"全部商务"==t&&(this.sale.value="所属商务"),this.updateBusinessDetail(),this.offPop4()},pitch5:function(t){var e=this;console.log(t);this.eventType.n=t,this.eventType.list.map((function(s){s.business_key==t&&(e.eventType.value=s.business_val)})),this.updateBusinessDetail(),this.offPop5()},showPop:function(t){var e=this;this.customerName.old=t,console.log(this.customerName.n),console.log(this.customerName.value),setTimeout((function(){e.customerName.dom=!0,e.customerName.shade=!0}),100)},showPop2:function(t){var e=this;this.CustType.old=t,console.log(this.CustType.n),console.log(this.CustType.value),setTimeout((function(){e.CustType.dom=!0,e.CustType.shade=!0}),100)},showPop4:function(t){var e=this;this.sale.old=t,console.log(this.sale.n),console.log(this.sale.value),setTimeout((function(){e.sale.dom=!0,e.sale.shade=!0}),100)},showPop5:function(t){var e=this;this.eventType.old=t,console.log(this.eventType.n),console.log(this.eventType.value),setTimeout((function(){e.eventType.dom=!0,e.eventType.shade=!0}),100)},showPop3:function(t){var e=this;setTimeout((function(){e.customDate.dom=!0,e.customDate.shade=!0}),100)},offPop:function(){var t=this;setTimeout((function(){t.customerName.shade=!1,setTimeout((function(){t.customerName.dom=!1}),200)}),100)},offPop2:function(){var t=this;setTimeout((function(){t.CustType.shade=!1,setTimeout((function(){t.CustType.dom=!1}),200)}),100)},offPop4:function(){var t=this;setTimeout((function(){t.sale.shade=!1,setTimeout((function(){t.sale.dom=!1}),200)}),100)},offPop5:function(){var t=this;setTimeout((function(){t.eventType.shade=!1,setTimeout((function(){t.eventType.dom=!1}),200)}),100)},offPop3:function(){var t=this;setTimeout((function(){t.customDate.shade=!1,setTimeout((function(){t.customDate.dom=!1}),200)}),100)},getTimeForm:function(t){var e=new Date(t);console.log("t1",e);var s="";switch(e.getDay()){case 0:s="星期天";break;case 1:s="星期一";break;case 2:s="星期二";break;case 3:s="星期三";break;case 4:s="星期四";break;case 5:s="星期五";break;case 6:s="星期六"}return(0,o.default)(e).format("YYYY")+"年"+(0,o.default)(e).format("MM")+"月"+(0,o.default)(e).format("DD")+"日 "+s},confirmTime:function(){console.log("confirmTime"),console.log(this.customDate.dateObj.start),console.log(this.customDate.dateObj.end);var e=new Date(this.customDate.dateObj.start),s=new Date(this.customDate.dateObj.end),i=s.getTime()-e.getTime();i=Math.floor(i/864e5),"----年--月--日 ---"!=this.customDate.data.start?"----年--月--日 ---"!=this.customDate.data.end?(console.log("days",i),this.customDate.value.start=(0,o.default)(this.customDate.dateObj.start).format("YYYY.MM.DD"),this.customDate.value.end=(0,o.default)(this.customDate.dateObj.end).format("YYYY.MM.DD"),this.offPop3(),this.slideYYRatio>1?this.scrollActionY=!1:this.scrollActionY=!0,this.updateBusinessDetail()):t.showToast({title:"请选择结束时间",icon:"none",duration:2e3}):t.showToast({title:"请选择开始时间",icon:"none",duration:2e3})},getScrollBottom:function(t){var e=this;console.log(t),this.slideYYRatio>1?this.scrollActionY=!1:this.scrollActionY=!0;var s="";"全部客户"!=this.customerName.value&&(s=this.customerName.value);var o="";"类型"!=this.CustType.n&&(o=this.CustType.n);var i="";"所属商务"!=this.sale.value&&(i=this.sale.value);var n="";"全部业务"!=this.eventType.n&&(n=this.eventType.n),"bottom"==t.detail.direction&&(this.page<this.totalPage?(this.load=!0,this.page=this.page+1,this.getBusinessDetail(this.customDate.dateObj.start,this.customDate.dateObj.end,n,i,o,s,this.page).then((function(t){console.log("滚动添加",t),e.list=e.list.concat(t.list);var s=90*(e.list.length+1)+126,o=0;e.isRotating||(o=(e.windowHeight-e.staHeight)/e.rpx-326),e.slideYY=o,console.log(s,o),e.slideYYRatio=o/s,e.slideYYHeight=o/s*o}))):this.load=!1)},getScroll:function(t){console.log(t),t.detail.scrollTop>100?this.toTop=!0:this.toTop=!1,this.HHLeft=t.detail.scrollLeft*this.slideRatio,console.log(this.HHLeft),this.YYTop=t.detail.scrollTop*this.slideYYRatio,this.YYTop>=672*this.rpx&&(this.YYTop=336*this.rpx*2),console.log(this.YYTop)},getScrollTop:function(t){console.log(t),this.YYTop=t.detail.scrollTop*this.slideYYRatio,console.log(this.YYTop)},HHMoveEvent:function(t){console.log(t);var e=t.touches[0],s=e.pageX;console.log(this.rpx),this.HHLeft=s-146*this.rpx*2,s-146*this.rpx*2<=0&&(this.HHLeft=0),s-146*this.rpx*2>=290*this.rpx&&(this.HHLeft=145*this.rpx*2),this.scrollLeft=this.HHLeft/this.slideRatio,console.log(this.scrollLeft),console.log("移动"+s)},HHStartEvent:function(t){console.log("开始",t)},HHEndEvent:function(t){console.log("结束",t)},YYMoveEvent:function(t){console.log(t);var e=t.touches[0],s=e.pageY;this.YYTop=s-326*this.rpx*2,s-326*this.rpx*2<=0&&(this.YYTop=0),s-326*this.rpx*2>=672*this.rpx&&(this.YYTop=336*this.rpx*2),this.scrollTop=this.YYTop/this.slideYYRatio,console.log(this.scrollTop),console.log("移动"+s)},YYStartEvent:function(t){console.log("开始",t)},YYEndEvent:function(t){console.log("结束",t)},getTop:function(){console.log("回到顶部"),2==this.scrollTop?this.scrollTop=1:this.scrollTop=2,console.log("距离",this.scrollTop)}}};e.default=u}).call(this,s("543d")["default"])},8381:function(t,e,s){"use strict";s.r(e);var o=s("7602"),i=s.n(o);for(var n in o)"default"!==n&&function(t){s.d(e,t,(function(){return o[t]}))}(n);e["default"]=i.a},d0ac:function(t,e,s){"use strict";s.r(e);var o=s("4968"),i=s("8381");for(var n in i)"default"!==n&&function(t){s.d(e,t,(function(){return i[t]}))}(n);s("05ef");var a,l=s("f0c5"),c=Object(l["a"])(i["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],a);e["default"]=c.exports}},[["4171","common/runtime","common/vendor"]]]);