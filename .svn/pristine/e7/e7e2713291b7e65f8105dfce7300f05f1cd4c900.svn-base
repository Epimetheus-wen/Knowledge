(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pagesA/preList/preList"],{3834:function(t,e,s){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=n(s("c1df"));function n(t){return t&&t.__esModule?t:{default:t}}var a=function(){s.e("components/headertop").then(function(){return resolve(s("69cd"))}.bind(null,s)).catch(s.oe)},i=function(){s.e("pagesA/components/headerLandscape").then(function(){return resolve(s("7e7f"))}.bind(null,s)).catch(s.oe)},c=function(){Promise.all([s.e("common/vendor"),s.e("components/uni-calendar/uni-calendar")]).then(function(){return resolve(s("ff20"))}.bind(null,s)).catch(s.oe)},r=function(){Promise.all([s.e("common/vendor"),s.e("node-modules/@dcloudio/uni-ui/lib/uni-icons/uni-icons")]).then(function(){return resolve(s("fedc"))}.bind(null,s)).catch(s.oe)},l={data:function(){return{titleTop:"商务排名",isRotating:!1,staHeight:"",dataType:1,rpx:1,customDate:{shade:!1,dom:!1,startDate:"2010-01-01",endDate:"",data:{start:"----年--月--日 ---",end:"----年--月--日 ---"},dateObj:{start:"",end:""},dufData:"",value:{start:"",end:""}},sort:{shade:!1,dom:!1,value:"按营收倒序",n:"2",old:"按营收倒序",list:[{name:"按营收升序",id:"1"},{name:"按营收倒序",id:"2"},{name:"按成本升序",id:"3"},{name:"按成本倒序",id:"4"},{name:"按毛利升序",id:"5"},{name:"按毛利倒序",id:"6"}]},eventType:{shade:!1,dom:!1,value:"全部业务",n:"全部业务",old:"全部业务",list:[{business_key:"全部业务",business_val:"全部业务"}]},slideRatio:"",scrollLeft:"",HHLeft:"",firstX:"",scrollTop:"",list:[],totalPage:0,page:1,load:!0,scrollLeft2:"",scrollTop2:"",list2:[],totalPage2:0,page2:1,load2:!0,windowHeight:"",slideYY:"",slideYYRatio:"",slideYYHeight:"",YYTop:"",scrollActionY:!1,toTop:!1,Permission:""}},components:{Headertop:a,uniCalendar:c,HeaderLandscape:i,uniIcons:r},onLoad:function(t){console.log(t)},onShow:function(){var t=this;console.log("状态栏高度");var e=this;wx.getSystemInfo({success:function(t){console.log("设备版本信息",t),console.log("状态栏高度",t.statusBarHeight),e.staHeight=t.statusBarHeight,e.rpx=t.windowWidth/750,e.windowHeight=t.windowHeight,e.slideYY=(e.windowHeight-e.staHeight)/e.rpx-326}}),this.getDataAuth().then((function(e){console.log(e),t.Permission=4})),wx.onWindowResize((function(t){console.log("切换",t),"landscape"===t.deviceOrientation?(e.isRotating=!0,e.windowHeight=t.size.windowHeight):(e.isRotating=!1,e.windowHeight=t.size.windowHeight)}));var s=1286,o=468,n=o/s;this.slideRatio=n},onReady:function(){var t=this,e=new Date,s=e.getTime()-864e5,n=e.getTime()-6048e5;this.customDate.value.start=(0,o.default)(n).format("YYYY.MM.DD"),this.customDate.value.end=(0,o.default)(s).format("YYYY.MM.DD"),this.customDate.dateObj.start=(0,o.default)(n).format("YYYY-MM-DD"),this.customDate.dateObj.end=(0,o.default)(s).format("YYYY-MM-DD"),this.getPreList((0,o.default)(n).format("YYYY-MM-DD"),(0,o.default)(s).format("YYYY-MM-DD"),"","","",1).then((function(e){console.log("初始化列表",e),t.list=e.list,t.totalPage=e.totalPage,t.totalPage<=1?t.load=!1:(t.load=!0,t.getPreList2())})),this.getTeamList((0,o.default)(n).format("YYYY-MM-DD"),(0,o.default)(s).format("YYYY-MM-DD"),"","","",1).then((function(e){console.log("初始化列表",e),t.list2=e.list,t.totalPage2=e.totalPage,t.totalPage2<=1?t.load2=!1:(t.load2=!0,t.getTeamList())})),this.getEventType()},methods:{getDataAuth:function(){var t=this;return new Promise((function(e,s){t.$post("/apiBusiness.html?f=getDataAuth").then((function(t){console.log("getDataAuth==>获取数据权限",t),e(t.data)}))}))},getEventType:function(){var t=this;this.$post("/apiBusiness.html?f=getEventType").then((function(e){console.log("getEventType==>获取业务线",e),t.eventType.list=t.eventType.list.concat(e.data)}))},getPreList2:function(){var t=this,e="";"全部业务"!=this.eventType.n&&(e=this.eventType.n);var s="",o="";1==this.sort.n&&(s="asc",o="revenue"),2==this.sort.n&&(s="desc",o="revenue"),3==this.sort.n&&(s="asc",o="cost"),4==this.sort.n&&(s="desc",o="cost"),5==this.sort.n&&(s="asc",o="profit"),6==this.sort.n&&(s="desc",o="profit"),this.load=!0,this.page=this.page+1,this.getPreList(this.customDate.dateObj.start,this.customDate.dateObj.end,e,s,o,this.page).then((function(e){console.log("滚动添加",e),t.list=t.list.concat(e.list)}))},getTeamList2:function(){var t=this,e="";"全部业务"!=this.eventType.n&&(e=this.eventType.n);var s="",o="";1==this.sort.n&&(s="asc",o="revenue"),2==this.sort.n&&(s="desc",o="revenue"),3==this.sort.n&&(s="asc",o="cost"),4==this.sort.n&&(s="desc",o="cost"),5==this.sort.n&&(s="asc",o="profit"),6==this.sort.n&&(s="desc",o="profit"),this.load2=!0,this.page2=this.page2+1,this.getTeamList(this.customDate.dateObj.start,this.customDate.dateObj.end,e,s,o,this.page2).then((function(e){console.log("滚动添加",e),t.list2=t.list2.concat(e.list)}))},updatePreList:function(){var t=this,e="";"全部业务"!=this.eventType.n&&(e=this.eventType.n);var s="",o="";1==this.sort.n&&(s="asc",o="revenue"),2==this.sort.n&&(s="desc",o="revenue"),3==this.sort.n&&(s="asc",o="cost"),4==this.sort.n&&(s="desc",o="cost"),5==this.sort.n&&(s="asc",o="profit"),6==this.sort.n&&(s="desc",o="profit"),this.list=[],this.list2=[],this.getPreList(this.customDate.dateObj.start,this.customDate.dateObj.end,e,s,o,1).then((function(e){console.log("初始化列表",e),t.list=e.list,t.page=1,t.totalPage=e.totalPage,t.totalPage<=1?t.load=!1:(t.load=!0,t.getPreList2())})),this.getTeamList(this.customDate.dateObj.start,this.customDate.dateObj.end,e,s,o,1).then((function(e){console.log("初始化列表",e),t.list2=e.list,t.page2=1,t.totalPage2=e.totalPage,t.totalPage2<=1?t.load2=!1:(t.load2=!0,t.getTeamList2())}))},getPreList:function(t,e,s,o,n,a){var i=this;return new Promise((function(c,r){var l={start:t,end:e,business_type:s,sort:o,s_sort:n,page:a};i.$post("/apiBusiness.html?f=getPreList",l).then((function(t){console.log("getPreList==>员工排名",t),c(t.data)}))}))},getTeamList:function(t,e,s,o,n,a){var i=this;return new Promise((function(c,r){var l={start:t,end:e,business_type:s,sort:o,s_sort:n,page:a};i.$post("/apiBusiness.html?f=getTeamList",l).then((function(t){console.log("getTeamList==>团队排名",t),c(t.data)}))}))},change:function(t){console.log(t),0==t.range.data.length?(console.log("ssssssss"),t.range.before?this.customDate.data.start=this.getTimeForm(t.range.before):(this.customDate.data.start="----年--月--日 ---",this.customDate.data.end="----年--月--日 ---")):(this.customDate.dateObj.start=t.range.data[0],this.customDate.dateObj.end=t.range.data[t.range.data.length-1],this.customDate.data.start=this.getTimeForm(t.range.data[0]),this.customDate.data.end=this.getTimeForm(t.range.data[t.range.data.length-1]))},pitch5:function(t){var e=this;console.log(t);this.eventType.n=t,this.eventType.list.map((function(s){s.business_key==t&&(e.eventType.value=s.business_val)})),this.updatePreList(),this.offPop5()},pitch6:function(t){var e=this;console.log(t),this.sort.n=t,this.sort.list.map((function(s){s.id==t&&(console.log(s.name),e.sort.value=s.name)})),this.updatePreList(),this.offPop6()},showPop5:function(t){var e=this;this.eventType.old=t,console.log(this.eventType.n),console.log(this.eventType.value),setTimeout((function(){e.eventType.dom=!0,e.eventType.shade=!0}),100)},showPop6:function(t){var e=this;this.sort.old=t,console.log(this.sort.n),console.log(this.sort.value),setTimeout((function(){e.sort.dom=!0,e.sort.shade=!0}),100)},showPop3:function(t){var e=this;setTimeout((function(){e.customDate.dom=!0,e.customDate.shade=!0}),100)},offPop5:function(){var t=this;setTimeout((function(){t.eventType.shade=!1,setTimeout((function(){t.eventType.dom=!1}),200)}),100)},offPop6:function(){var t=this;setTimeout((function(){t.sort.shade=!1,setTimeout((function(){t.sort.dom=!1}),200)}),100)},offPop3:function(){var t=this;setTimeout((function(){t.customDate.shade=!1,setTimeout((function(){t.customDate.dom=!1}),200)}),100)},getTimeForm:function(t){var e=new Date(t);console.log("t1",e);var s="";switch(e.getDay()){case 0:s="星期天";break;case 1:s="星期一";break;case 2:s="星期二";break;case 3:s="星期三";break;case 4:s="星期四";break;case 5:s="星期五";break;case 6:s="星期六"}return(0,o.default)(e).format("YYYY")+"年"+(0,o.default)(e).format("MM")+"月"+(0,o.default)(e).format("DD")+"日 "+s},confirmTime:function(){console.log("confirmTime"),console.log(this.customDate.dateObj.start),console.log(this.customDate.dateObj.end);var e=new Date(this.customDate.dateObj.start),s=new Date(this.customDate.dateObj.end),n=s.getTime()-e.getTime();n=Math.floor(n/864e5),"----年--月--日 ---"!=this.customDate.data.start?"----年--月--日 ---"!=this.customDate.data.end?(console.log("days",n),this.customDate.value.start=(0,o.default)(this.customDate.dateObj.start).format("YYYY.MM.DD"),this.customDate.value.end=(0,o.default)(this.customDate.dateObj.end).format("YYYY.MM.DD"),this.offPop3(),this.updatePreList()):t.showToast({title:"请选择结束时间",icon:"none",duration:2e3}):t.showToast({title:"请选择开始时间",icon:"none",duration:2e3})},getScrollBottom:function(t){var e=this;console.log(t);var s="";"全部业务"!=this.eventType.n&&(s=this.eventType.n);var o="",n="";1==this.sort.n&&(o="asc",n="revenue"),2==this.sort.n&&(o="desc",n="revenue"),3==this.sort.n&&(o="asc",n="cost"),4==this.sort.n&&(o="desc",n="cost"),5==this.sort.n&&(o="asc",n="profit"),6==this.sort.n&&(o="desc",n="profit"),"bottom"==t.detail.direction&&(this.page<this.totalPage?(this.load=!0,this.page=this.page+1,this.getPreList(this.customDate.dateObj.start,this.customDate.dateObj.end,s,o,n,this.page).then((function(t){console.log("滚动添加",t),e.list=e.list.concat(t.list)}))):this.load=!1)},getScrollBottom2:function(t){var e=this;console.log(t);var s="";"全部业务"!=this.eventType.n&&(s=this.eventType.n);var o="",n="";1==this.sort.n&&(o="asc",n="revenue"),2==this.sort.n&&(o="desc",n="revenue"),3==this.sort.n&&(o="asc",n="cost"),4==this.sort.n&&(o="desc",n="cost"),5==this.sort.n&&(o="asc",n="profit"),6==this.sort.n&&(o="desc",n="profit"),"bottom"==t.detail.direction&&(this.page2<this.totalPage2?(this.load2=!0,this.page2=this.page2+1,this.getTeamList(this.customDate.dateObj.start,this.customDate.dateObj.end,s,o,n,this.page2).then((function(t){console.log("滚动添加",t),e.list2=e.list2.concat(t.list)}))):this.load2=!1)},cutTab:function(t){this.dataType=t},getScroll:function(t){console.log(t),t.detail.scrollTop>100?this.toTop=!0:this.toTop=!1},getTop:function(){console.log("回到顶部"),0==this.scrollTop?this.scrollTop=.1:this.scrollTop=0,console.log("距离",this.scrollTop)},goDetails:function(e){t.navigateTo({url:"/pagesA/details/details?name="+e})}}};e.default=l}).call(this,s("543d")["default"])},5272:function(t,e,s){"use strict";var o=s("b686"),n=s.n(o);n.a},"64ee":function(t,e,s){"use strict";s.r(e);var o=s("a39e"),n=s("f54b");for(var a in n)"default"!==a&&function(t){s.d(e,t,(function(){return n[t]}))}(a);s("5272");var i,c=s("f0c5"),r=Object(c["a"])(n["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],i);e["default"]=r.exports},a39e:function(t,e,s){"use strict";s.d(e,"b",(function(){return n})),s.d(e,"c",(function(){return a})),s.d(e,"a",(function(){return o}));var o={"uni-calendar":function(){return Promise.all([s.e("common/vendor"),s.e("components/uni-calendar/uni-calendar")]).then(s.bind(null,"ff20"))}},n=function(){var t=this,e=t.$createElement;t._self._c},a=[]},b686:function(t,e,s){},d293:function(t,e,s){"use strict";(function(t){s("6cdc"),s("921b");o(s("66fd"));var e=o(s("64ee"));function o(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,s("543d")["createPage"])},f54b:function(t,e,s){"use strict";s.r(e);var o=s("3834"),n=s.n(o);for(var a in o)"default"!==a&&function(t){s.d(e,t,(function(){return o[t]}))}(a);e["default"]=n.a}},[["d293","common/runtime","common/vendor"]]]);